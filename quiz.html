<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: K√§vlinge kommun - Sektor Arbetsliv och fritid</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a5a3a 0%, #2d7a52 100%);
            min-height: 100vh;
            padding: 2rem;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
        }

        /* TILLBAKA-KNAPP */
        .back-to-presentation {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.95);
            color: #1a5a3a;
            border: 2px solid #1a5a3a;
            padding: 0.6rem 1.2rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .back-to-presentation:hover {
            background: #1a5a3a;
            color: white;
            transform: scale(1.05);
        }

        header {
            background: linear-gradient(135deg, #1a5a3a 0%, #2d7a52 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        header h1 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .quiz-content {
            padding: 2rem;
        }

        .question-container {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .question-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-number {
            color: #1a5a3a;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .option:hover {
            background: #e8f5e9;
            border-color: #2d7a52;
            transform: translateX(5px);
        }

        .option.selected {
            background: #c4a35a;
            border-color: #c4a35a;
            color: white;
        }

        .option.correct {
            background: #4caf50;
            border-color: #4caf50;
            color: white;
        }

        .option.incorrect {
            background: #f44336;
            border-color: #f44336;
            color: white;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .option-letter {
            font-weight: 700;
            font-size: 1.2rem;
            min-width: 30px;
        }

        .explanation {
            display: none;
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-radius: 5px;
        }

        .explanation.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .explanation h4 {
            color: #2196F3;
            margin-bottom: 0.75rem;
        }

        .explanation p {
            margin-bottom: 0.5rem;
            color: #333;
        }

        .explanation a {
            color: #2196F3;
            text-decoration: underline;
        }

        .explanation a:hover {
            color: #1976D2;
        }

        .reference {
            font-size: 0.85rem;
            font-style: italic;
            color: #666;
            margin-top: 1rem;
            padding-top: 0.75rem;
            border-top: 1px solid #ddd;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #eee;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #1a5a3a;
            color: white;
        }

        .btn-primary:hover {
            background: #2d7a52;
            transform: scale(1.05);
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #c4a35a;
            color: white;
        }

        .btn-secondary:hover {
            background: #b89350;
            transform: scale(1.05);
        }

        .result-container {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .result-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .result-score {
            font-size: 4rem;
            font-weight: 700;
            color: #1a5a3a;
            margin: 1rem 0;
        }

        .result-message {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 2rem;
        }

        .score-bar {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #1a5a3a 0%, #2d7a52 100%);
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .progress {
            text-align: center;
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .intro-screen {
            padding: 2rem;
            text-align: center;
        }

        .intro-screen h2 {
            color: #1a5a3a;
            margin-bottom: 1rem;
        }

        .intro-screen p {
            color: #666;
            margin-bottom: 1rem;
            font-size: 1.05rem;
        }

        .intro-screen ul {
            text-align: left;
            max-width: 600px;
            margin: 1.5rem auto;
            background: #f8f9fa;
            padding: 1.5rem 2rem;
            border-radius: 10px;
        }

        .intro-screen li {
            margin-bottom: 0.5rem;
            color: #333;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .back-to-presentation {
                top: 0.5rem;
                right: 0.5rem;
                padding: 0.5rem 1rem;
                font-size: 0.8rem;
            }

            header h1 {
                font-size: 1.5rem;
            }

            .question-text {
                font-size: 1.1rem;
            }

            .result-score {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>
    <!-- TILLBAKA-KNAPP -->
    <a href="index.html" class="back-to-presentation" title="Tillbaka till presentationen">
        ‚Üê Presentation
    </a>

    <div class="container">
        <header>
            <h1>üèõÔ∏è Quiz: K√§vlinge kommun</h1>
            <p>Sektor Arbetsliv och fritid - Controller-tj√§nsten</p>
        </header>

        <!-- INTRO SCREEN -->
        <div id="introScreen" class="intro-screen">
            <h2>V√§lkommen till quizet!</h2>
            <p>Detta quiz testar din kunskap om Sektor Arbetsliv och fritid i K√§vlinge kommun samt controller-tj√§nsten.</p>
            
            <ul>
                <li>üìù <strong>10 fr√•gor</strong> med 4 svarsalternativ vardera</li>
                <li>üéØ Kluriga fr√•gor f√∂r b√•de s√∂kande och anst√§llda</li>
                <li>üí° Detaljerade f√∂rklaringar till varje svar</li>
                <li>üìö Referenser i Harvard-stil med klickbara l√§nkar</li>
                <li>‚è±Ô∏è Ta dig tid att t√§nka efter!</li>
            </ul>

            <p style="margin-top: 2rem;"><strong>Lycka till!</strong></p>
            <button class="btn btn-primary" onclick="startQuiz()" style="margin-top: 1rem;">Starta quiz</button>
        </div>

        <!-- QUIZ CONTENT -->
        <div id="quizContent" class="quiz-content" style="display: none;">
            <div class="progress">
                Fr√•ga <span id="currentQuestion">1</span> av <span id="totalQuestions">10</span>
            </div>

            <!-- Questions will be inserted here by JavaScript -->
            <div id="questionsContainer"></div>

            <div class="navigation">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" style="display: none;">‚Üê F√∂reg√•ende</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>N√§sta ‚Üí</button>
            </div>
        </div>

        <!-- RESULT SCREEN -->
        <div id="resultScreen" class="result-container">
            <h2>üéâ Quiz avslutat!</h2>
            <div class="result-score" id="finalScore">0/10</div>
            <div class="score-bar">
                <div class="score-fill" id="scoreFill" style="width: 0%;">
                    <span id="scorePercent">0%</span>
                </div>
            </div>
            <p class="result-message" id="resultMessage"></p>
            <button class="btn btn-primary" onclick="restartQuiz()">G√∂r om quizet</button>
            <button class="btn btn-secondary" onclick="reviewAnswers()" style="margin-left: 1rem;">Granska svar</button>
        </div>
    </div>

    <script>
        // UPPDATERING 2026-01-12: Quiz om K√§vlinge kommun - baserat p√• PM fr√•n People Impact
        const quizData = [
            {
                question: "Vilken √§r K√§vlinge kommuns nya vision som togs fram 2023?",
                options: [
                    "Vi skapar framtiden tillsammans",
                    "Vi formar framtiden",
                    "En kommun i v√§rldsklass",
                    "Fram√•t tillsammans"
                ],
                correct: 1,
                explanation: {
                    correct: "R√§tt! Under 2023 togs visionen 'Vi formar framtiden' fram. Detta √§r en fram√•tblickande vision som speglar kommunens ambition att vara aktiv och gestaltande, inte bara f√∂rvaltande. F√∂r en controller √§r detta viktigt att f√∂rst√• ‚Äì det handlar om att bidra till utveckling, inte bara rapportera historiska siffror.",
                    incorrect: "Fel. K√§vlinge kommuns vision sedan 2023 √§r 'Vi formar framtiden'. Detta √§r en tydlig markering av att kommunen vill vara proaktiv och utvecklingsinriktad. Som controller f√∂rv√§ntas du bidra till att forma framtiden genom strategisk ekonomistyrning och verksamhetsutveckling, vilket ligger i linje med visionen.",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 2.</a>"
                }
            },
            {
                question: "Vilken √§r Sektor Arbetsliv och fritids √•rliga oms√§ttning (2024)?",
                options: [
                    "Cirka 250 miljoner kronor",
                    "Cirka 430 miljoner kronor",
                    "Cirka 650 miljoner kronor",
                    "Cirka 1,9 miljarder kronor"
                ],
                correct: 1,
                explanation: {
                    correct: "Korrekt! Sektor Arbetsliv och fritid har en oms√§ttning p√• cirka 430 miljoner kronor (2024). Detta √§r en betydande budget som motsvarar ungef√§r 23% av kommunens totala budget p√• 1,9 miljarder. Som controller ansvarar du f√∂r ekonomistyrningen av denna omfattande verksamhet som str√§cker sig fr√•n gymnasieutbildning till socialtj√§nst.",
                    incorrect: "Fel. Sektorns oms√§ttning √§r cirka 430 miljoner kronor (2024). Detta √§r inte hela kommunens budget (1,9 miljarder), utan specifikt f√∂r Sektor Arbetsliv och fritid. Som controller beh√∂ver du ha koll p√• dessa siffror ‚Äì de √§r grunden f√∂r budget, prognos och uppf√∂ljning. 430 mnkr √§r en betydande ekonomi att styra!",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 4.</a> Se √§ven <a href='https://jobb.kavlinge.se/department/arbetslivochfritid/' target='_blank'>jobb.kavlinge.se - Arbetsliv och fritid</a>"
                }
            },
            {
                question: "Vilka √§r K√§vlinge kommuns tre v√§rdeord?",
                options: [
                    "Samverkan, Kvalitet, Effektivitet",
                    "√ñppenhet, Engagemang, Utveckling",
                    "Respekt, Ansvar, Professionalitet",
                    "Innovation, H√•llbarhet, Trygghet"
                ],
                correct: 1,
                explanation: {
                    correct: "Helt r√§tt! K√§vlinge kommuns tre v√§rdeord √§r √ñppenhet, Engagemang och Utveckling. Varje v√§rdeord har tre underkategorier: √ñppenhet (f√∂rtroende, inkluderande, lyh√∂rda), Engagemang (intresserade, handlingskraftiga, ansvarstagande), och Utveckling (nyfikna, resultatinriktade, modiga). Som controller f√∂rv√§ntas du leva dessa v√§rden i ditt arbete.",
                    incorrect: "Fel. De tre v√§rdeorden √§r √ñppenhet, Engagemang och Utveckling. Dessa √§r inte bara ord p√• v√§ggen ‚Äì de √§r en del av organisationskulturen och uttrycks som 'Tillsammans b√§r vi v√•r gemensamma lagtr√∂ja och skapar det som √§r VI. Det b√∂rjar hos dig.' Som controller √§r det viktigt att f√∂rst√• och leva dessa v√§rden i ekonomistyrningen.",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 3.</a> Se √§ven <a href='https://www.kavlinge.se' target='_blank'>www.kavlinge.se</a>"
                }
            },
            {
                question: "Hur m√•nga kommun√∂vergripande m√•l har K√§vlinge kommun?",
                options: [
                    "4 m√•l",
                    "5 m√•l",
                    "7 m√•l",
                    "10 m√•l"
                ],
                correct: 2,
                explanation: {
                    correct: "Korrekt! K√§vlinge kommun har 7 kommun√∂vergripande m√•l. Dessa inkluderar bland annat att 95% av eleverna i √•rskurs 9 ska uppn√• gymnasiebeh√∂righet, att kommunen ska vara topp 5 i Sk√•ne i f√∂retagsklimat, och att f√§rre barn och unga ska uppvisa riskbeteende. Som controller beh√∂ver du f√∂rst√• hur dessa m√•l p√•verkar sektorns verksamhet och ekonomi.",
                    incorrect: "Fel. Kommunen har 7 kommun√∂vergripande m√•l. Dessa str√§cker sig fr√•n utbildning (95% gymnasiebeh√∂righet) till f√∂retagsklimat (topp 5 i Sk√•ne) och barns h√§lsa. F√∂r en controller √§r detta viktigt eftersom m√•len driver resursf√∂rdelning och prioriteringar. Du f√∂rv√§ntas kunna koppla ekonomiska uppf√∂ljningar till m√•luppfyllelse.",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 2.</a>"
                }
            },
            {
                question: "Vem rapporterar controllern till organisatoriskt?",
                options: [
                    "Sektorchefen f√∂r Arbetsliv och fritid",
                    "Kommunens ekonomichef",
                    "Kommundirekt√∂ren",
                    "Arbetsliv- och fritidsn√§mnden"
                ],
                correct: 1,
                explanation: {
                    correct: "Helt r√§tt! Controllern tillh√∂r organisatoriskt ekonomiavdelningen (central funktion) och rapporterar till kommunens ekonomichef. SAMTIDIGT arbetar controllern n√§ra sektorchefen och ing√•r i Sektor Arbetsliv och fritids ledningsgrupp. Detta √§r en matriseorganisation d√§r du har dubbla lojaliteter ‚Äì b√•de till central ekonomifunktion och till sektorn du st√∂djer.",
                    incorrect: "Fel. Controllern rapporterar organisatoriskt till kommunens ekonomichef, √§ven om hen arbetar v√§ldigt n√§ra sektorchefen f√∂r Arbetsliv och fritid. Detta √§r en typisk matriseorganisation i kommuner ‚Äì du tillh√∂r den centrala ekonomifunktionen men √§r fysiskt och operativt n√§ra sektorn. Du ing√•r ocks√• i sektorns ledningsgrupp. Det kr√§ver god balansg√•ng!",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 4.</a>"
                }
            },
            {
                question: "Vad √§r controllerns FR√ÑMSTA st√∂dsystem enligt PM:et?",
                options: [
                    "Excel och Power BI",
                    "Hypergene",
                    "Raindance",
                    "QlikSense"
                ],
                correct: 1,
                explanation: {
                    correct: "Perfekt! Hypergene √§r controllerns fr√§msta st√∂dsystem enligt PM:et, d√§r det st√•r: '‚≠ê Hypergene √§r controllerns fr√§msta st√∂dsystem'. Viktigt √§r att i uppdraget ing√•r att UTVECKLA Hypergene s√• det blir ett s√• bra st√∂d som m√∂jligt till sektorn. Du f√∂rv√§ntas allts√• inte bara anv√§nda systemet, utan aktivt utveckla och f√∂rb√§ttra det.",
                    incorrect: "Fel. Hypergene √§r det fr√§msta st√∂dsystemet, vilket s√§rskilt framh√§vs i PM:et med en stj√§rna. Viktigt att notera: I uppdraget ing√•r att utveckla Hypergene s√• det blir ett s√• bra st√∂d som m√∂jligt. Det r√§cker allts√• inte att bara kunna anv√§nda systemet ‚Äì du f√∂rv√§ntas kunna utveckla rapporter, dashboards och funktionalitet f√∂r att st√∂dja verksamheten b√§ttre.",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 5.</a>"
                }
            },
            {
                question: "Vilket av dessa √§r INTE en av de fyra fokusomr√•dena kopplade till kommunens vision?",
                options: [
                    "M√∂jligg√∂ra de b√§sta f√∂ruts√§ttningarna f√∂r barn och unga",
                    "Skapa en smartare kommun genom samskapande och innovativa l√∂sningar",
                    "√ñka kommunens skatteint√§kter genom befolkningstillv√§xt",
                    "Genom samverkan skapa en tryggare och s√§krare kommun"
                ],
                correct: 2,
                explanation: {
                    correct: "Korrekt! '√ñka kommunens skatteint√§kter genom befolkningstillv√§xt' √§r INTE ett av de fyra fokusomr√•dena. De faktiska fokusomr√•dena √§r: 1) M√∂jligg√∂ra de b√§sta f√∂ruts√§ttningarna f√∂r barn och unga, 2) Skapa en smartare kommun genom samskapande och innovativa l√∂sningar, 3) V√§lja h√•llbara l√∂sningar f√∂r god tillv√§xt och b√§ttre klimat, 4) Genom samverkan skapa en tryggare och s√§krare kommun.",
                    incorrect: "Fel. De fyra fokusomr√•dena √§r: 1) Barn och ungas f√∂ruts√§ttningar, 2) Smartare kommun genom samskapande och innovation, 3) H√•llbara l√∂sningar f√∂r tillv√§xt och klimat, 4) Tryggare och s√§krare kommun genom samverkan. Ingen av dessa handlar prim√§rt om skatteint√§kter ‚Äì ist√§llet fokuseras p√• medborgarperspektivet, innovation, h√•llbarhet och trygghet.",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 2-3.</a>"
                }
            },
            {
                question: "Vilken motivationsfaktor f√∂r rollen betonas som viktigast enligt kravprofilen?",
                options: [
                    "Motiveras av h√∂g l√∂n och f√∂rm√•ner",
                    "Motiveras av sektorns bredd och behovet av relevanta nyckeltal f√∂r olika verksamheter",
                    "Motiveras av att arbeta sj√§lvst√§ndigt utan st√∂rningar",
                    "Motiveras av att fokusera enbart p√• ekonomisk rapportering"
                ],
                correct: 1,
                explanation: {
                    correct: "Utm√§rkt! Enligt PM:et √§r den f√∂rsta och viktigaste motivationsfaktorn att man 'motiveras av sektorns bredd och behov av att hitta f√∂r verksamheterna relevanta nyckeltal och uppf√∂ljningsmetoder f√∂r att visa p√• √∂vergripande resultat'. Detta √§r k√§rnan i rollen ‚Äì att f√∂rst√• och m√§ta helt olika verksamheter fr√•n kulturskola till socialtj√§nst.",
                    incorrect: "Fel. Kravprofilen betonar att man m√•ste motiveras av sektorns bredd och utmaningen att hitta relevanta nyckeltal f√∂r helt olika verksamheter. Detta √§r en controller-roll som kr√§ver genuint intresse f√∂r verksamhet, inte bara f√∂r siffror. Du beh√∂ver √§lska utmaningen att hitta r√§tt m√•tt f√∂r allt fr√•n bibliotek till IFO ‚Äì det kr√§ver b√•de kreativitet och analytisk f√∂rm√•ga.",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 6.</a>"
                }
            },
            {
                question: "Vilken kompetens beskrivs som 'f√∂rm√•gan att se de tydliga samspelen mellan ekonomi och verksamhet'?",
                options: [
                    "Ansvarstagande och sj√§lvg√•ende",
                    "Helhetsperspektiv",
                    "Kommunikativ",
                    "Utvecklingsinriktad"
                ],
                correct: 1,
                explanation: {
                    correct: "Perfekt! 'Helhetsperspektiv' definieras som 'f√∂rm√•gan att se de tydliga samspelen mellan ekonomi och verksamhet och utg√∂ra en naturlig brygga. Kan r√∂ra sig mellan strategiska och operativa perspektiven.' Detta √§r en k√§rnkompetens f√∂r modern verksamhetsn√§ra ekonomistyrning ‚Äì du √§r bryggan mellan ekonomi och verksamhet.",
                    incorrect: "Fel. Det √§r 'Helhetsperspektiv' som beskrivs s√• h√§r. Detta √§r en avg√∂rande kompetens: att f√∂rst√• samspelet mellan ekonomi och verksamhet, att kunna v√§xla mellan strategisk niv√• och operativ vardag, och att vara den naturliga bryggan mellan ekonomichef och sektorchef. Utan detta perspektiv blir man bara en rapport√∂r, inte en strategisk partner.",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 6.</a>"
                }
            },
            {
                question: "Hur m√•nga inv√•nare har K√§vlinge kommun?",
                options: [
                    "Drygt 22 500",
                    "Drygt 27 500",
                    "Drygt 32 500",
                    "Drygt 42 500"
                ],
                correct: 2,
                explanation: {
                    correct: "Korrekt! K√§vlinge kommun har drygt 32 500 inv√•nare. Kommunen har en kontinuerlig befolkningstillv√§xt d√§r planlagda omr√•den byggs ut. Med en budget p√• 1,9 miljarder kronor och 2 000 anst√§llda betj√§nar kommunen denna v√§xande befolkning. Som controller beh√∂ver du f√∂rst√• demografiska trender och hur de p√•verkar verksamhet och ekonomi.",
                    incorrect: "Fel. Kommunen har drygt 32 500 inv√•nare. Detta √§r viktigt att veta som controller eftersom inv√•narantalet direkt p√•verkar resursbehov, statsbidraget och m√•nga nyckeltal (kostnad per inv√•nare, etc.). Kommunen v√§xer kontinuerligt, vilket inneb√§r b√•de m√∂jligheter (fler skattebetalare) och utmaningar (behov av ut√∂kad verksamhet).",
                    reference: "<a href='pm-controller-arbetsliv-och-fritid_202512.pdf' target='_blank'>K√§vlinge kommun (2025) PM Controller ‚Äì Sektor Arbetsliv och fritid. People Impact I Sverige AB, s. 1.</a> Se √§ven <a href='https://www.kavlinge.se' target='_blank'>www.kavlinge.se</a> och <a href='https://jobb.kavlinge.se/department/arbetslivochfritid/' target='_blank'>Sektor Arbetsliv och fritid</a>"
                }
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];

        function startQuiz() {
            document.getElementById('introScreen').style.display = 'none';
            document.getElementById('quizContent').style.display = 'block';
            document.getElementById('totalQuestions').textContent = quizData.length;
            renderQuestion();
        }

        function renderQuestion() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            const questionData = quizData[currentQuestionIndex];
            
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question-container active';
            
            questionDiv.innerHTML = `
                <div class="question-number">Fr√•ga ${currentQuestionIndex + 1} av ${quizData.length}</div>
                <div class="question-text">${questionData.question}</div>
                <div class="options">
                    ${questionData.options.map((option, index) => `
                        <div class="option" onclick="selectAnswer(${index})">
                            <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                            <span>${option}</span>
                        </div>
                    `).join('')}
                </div>
                <div class="explanation" id="explanation"></div>
            `;
            
            container.appendChild(questionDiv);
            
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateNavigationButtons();
        }

        function selectAnswer(answerIndex) {
            if (userAnswers[currentQuestionIndex] !== undefined) return;
            
            userAnswers[currentQuestionIndex] = answerIndex;
            const questionData = quizData[currentQuestionIndex];
            const options = document.querySelectorAll('.option');
            
            options.forEach((option, index) => {
                option.classList.add('disabled');
                if (index === questionData.correct) {
                    option.classList.add('correct');
                }
                if (index === answerIndex && index !== questionData.correct) {
                    option.classList.add('incorrect');
                }
            });

            if (answerIndex === questionData.correct) {
                score++;
            }

            showExplanation(answerIndex === questionData.correct);
            document.getElementById('nextBtn').disabled = false;
        }

        function showExplanation(isCorrect) {
            const questionData = quizData[currentQuestionIndex];
            const explanationDiv = document.getElementById('explanation');
            
            explanationDiv.innerHTML = `
                <h4>${isCorrect ? '‚úÖ Korrekt svar!' : '‚ùå Fel svar'}</h4>
                <p><strong>F√∂rklaring:</strong></p>
                <p>${isCorrect ? questionData.explanation.correct : questionData.explanation.incorrect}</p>
                <div class="reference">
                    <strong>K√§lla:</strong> ${questionData.explanation.reference}
                </div>
            `;
            explanationDiv.classList.add('show');
        }

        function nextQuestion() {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
                document.getElementById('nextBtn').disabled = true;
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
                
                if (userAnswers[currentQuestionIndex] !== undefined) {
                    const answerIndex = userAnswers[currentQuestionIndex];
                    const options = document.querySelectorAll('.option');
                    const questionData = quizData[currentQuestionIndex];
                    
                    options.forEach((option, index) => {
                        option.classList.add('disabled');
                        if (index === questionData.correct) {
                            option.classList.add('correct');
                        }
                        if (index === answerIndex && index !== questionData.correct) {
                            option.classList.add('incorrect');
                        }
                    });
                    
                    showExplanation(answerIndex === questionData.correct);
                    document.getElementById('nextBtn').disabled = false;
                }
            }
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = currentQuestionIndex === 0 ? 'none' : 'block';
            nextBtn.textContent = currentQuestionIndex === quizData.length - 1 ? 'Se resultat' : 'N√§sta ‚Üí';
        }

        function showResults() {
            document.getElementById('quizContent').style.display = 'none';
            document.getElementById('resultScreen').classList.add('show');
            
            const percentage = Math.round((score / quizData.length) * 100);
            document.getElementById('finalScore').textContent = `${score}/${quizData.length}`;
            document.getElementById('scorePercent').textContent = `${percentage}%`;
            
            setTimeout(() => {
                document.getElementById('scoreFill').style.width = `${percentage}%`;
            }, 100);
            
            let message = '';
            if (percentage === 100) {
                message = 'üèÜ Perfekt! Du har utm√§rkt kunskap om K√§vlinge kommun och controller-tj√§nsten!';
            } else if (percentage >= 80) {
                message = 'üåü Mycket bra! Du har god f√∂rst√•else f√∂r sektorn och controller-rollen.';
            } else if (percentage >= 60) {
                message = 'üëç Bra jobbat! Du har grundl√§ggande kunskap, men det finns mer att l√§ra.';
            } else if (percentage >= 40) {
                message = 'üìö Du har viss kunskap, men rekommenderas att l√§sa PM:et noggrannare.';
            } else {
                message = 'üí™ Forts√§tt l√§ra! Granska svaren och f√∂rdjupa dig i PM-dokumentet.';
            }
            
            document.getElementById('resultMessage').textContent = message;
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            
            document.getElementById('resultScreen').classList.remove('show');
            document.getElementById('introScreen').style.display = 'block';
            document.getElementById('scoreFill').style.width = '0%';
        }

        function reviewAnswers() {
            currentQuestionIndex = 0;
            document.getElementById('resultScreen').classList.remove('show');
            document.getElementById('quizContent').style.display = 'block';
            renderQuestion();
            
            if (userAnswers[0] !== undefined) {
                const answerIndex = userAnswers[0];
                const options = document.querySelectorAll('.option');
                const questionData = quizData[0];
                
                options.forEach((option, index) => {
                    option.classList.add('disabled');
                    if (index === questionData.correct) {
                        option.classList.add('correct');
                    }
                    if (index === answerIndex && index !== questionData.correct) {
                        option.classList.add('incorrect');
                    }
                });
                
                showExplanation(answerIndex === questionData.correct);
                document.getElementById('nextBtn').disabled = false;
            }
        }
    </script>
</body>
</html>
